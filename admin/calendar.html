<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>学年暦管理 | PoCKet</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- 共通ナビ -->
  <link rel="stylesheet" href="../nav/css/nav-base.css">
  <link rel="stylesheet" href="../nav/css/nav-desktop.css">
  <link rel="stylesheet" href="../nav/css/nav-mobile.css">

  <!-- マイページ系を流用 -->
  <link rel="stylesheet" href="../css/mypage-style.css">
  <link rel="stylesheet" href="../responsive/css/responsive-mypage.css"
        media="screen and (max-width:768px)">

  <!-- 学年暦専用（後で作る） -->
  <link rel="stylesheet" href="../css/calendar-admin.css">

  <script src="../auth/js/app-auth.js" defer></script>
</head>

<body data-page="admin-calendar">

<!-- ヘッダー（共通） -->
<div id="header-wrapper">
  <header id="main-header">
    <div class="header-content">
      <a href="../index.html">
        <img src="../assets/images/club-icon.JPG" class="logo">
        <div class="site-title">
            <h1>学年暦管理</h1>
            <p>PoCKet Admin</p>
        </div>
      </a>
      <button class="nav-toggle" aria-label="メニュー">
        <span></span><span></span><span></span>
      </button>
    </div>
  </header>
</div>

<main class="calendar-admin-section">
  <section class="admin-description">
  <h2>学年暦（貸出期間等）管理</h2>
  <p>
    各期間ごとに「最大貸出日数」を設定します。<br>
    貸出開始日が属する期間のルールが適用されます。
  </p>
  </section>

  <!-- 年度選択 -->
  <div class="year-selector">
    <label for="yearSelect">
        対象年度: 
    </label>
    <select id="yearSelect"></select>
    <small>※ 編集内容はこの年度に保存されます。</small>

    <button id="addTermBtn" class="primary-btn">
        + 期間を追加
    </button>
  </div>

  <!-- 一覧 -->
  <section class="mypage-card">
    <h3>学期・休業期間</h3>
    <div id="SingleTermContainer">
        読み込み中…
    </div>
  </section>

  <!-- 入構禁止期間（複数系）-->
  <section class="mypage-card">
    <h3>入構禁止期間</h3>
    <div id="campusClosedList">
        読み込み中…
    </div>

    <button id="addCampusClosed" class="primary-btn">
      + 入構禁止期間を追加
    </button>
  </section>
</main>

<div id="termModal" class="modal hidden">
  <div class="modal-content">
    <h3 id="modalTitle">期間編集</h3>

    <form id="termForm">
      <label>
        種別
        <select name="type" required>
          <option value="SPR_Sem00">春学期</option>
          <option value="SMR_Vac">夏休み</option>
          <option value="AUT_Sem01">秋学期（年内）</option>
          <option value="WTR_Vac">年末年始</option>
          <option value="AUT_Sem02">秋学期（年明け）</option>
          <option value="SPR_Vac">春休み</option>
        </select>
      </label>

      <label>
        開始日
        <input type="date" name="start_date" required>
      </label>

      <label>
        終了日
        <input type="date" name="end_date" required>
      </label>

      <label>
        最大貸出日数
        <select name="max_days">
          <option value="7">7日</option>
          <option value="14">14日</option>
        </select>
      </label>

      <div class="modal-actions">
        <button type="submit" class="primary-btn">保存</button>
        <button type="button" id="closeModalBtn">キャンセル</button>
      </div>
    </form>
  </div>
</div>

<!-- CAMPUS_CLOSED 専用モーダル -->
<div id="campusClosedModal" class="modal hidden">
  <div class="modal-content">
    <h3 id="campusClosedTitle">入構禁止期間</h3>

    <form id="campusClosedForm">
      <label>
        開始日
        <input type="date" name="start_date" required>
      </label>

      <label>
        終了日
        <input type="date" name="end_date" required>
      </label>

      <div class="modal-actions">
        <button type="submit" class="primary-btn">保存</button>
        <button type="button" id="closeCampusClosedBtn">キャンセル</button>
      </div>
    </form>
  </div>
</div>

<!-- オフキャンバスナビ  -->
  <div class="offcanvas-nav">
    <ul class="offcanvas-menu">

      <!-- 認証なし -->
      <li id="nav-login">
        <a href="/reserve_site/auth/login.html">ログイン / 新規登録</a>
      </li>
      <!-- 認証あり（表示のみ） -->
      <li id="nav-loggedin" style="display:none;">
        <span class="nav-muted">
          ログイン中：<strong id="nav-user-name"></strong>
        </span>
      </li>
      <!-- 認証あり -->
      <li id="nav-mypage" style="display: none;">
        <a href="/reserve_site/mypage.html" data-page="mypage">マイページ</a>
      </li>
      <hr>
      <li>
        <a href="/reserve_site/index.html">総合トップ</a>
      </li>
      <hr>

      <!-- カメラ -->
      <li class="offcanvas-group">
        <button class="offcanvas-toggle">
          カメラ
          <span class="arrow"></span>
        </button>
        <ul class="offcanvas-submenu">
          <li><a href="../camera/index.html" data-page="camera">カメラトップ</a></li>
          <li><a href="../camera/reserve.html" data-page="camera-calendar">カレンダー</a></li>
        </ul>
      </li>

      <!-- PC -->
      <li class="offcanvas-group">
        <button class="offcanvas-toggle">
          PC
          <span class="arrow"></span>
        </button>
        <ul class="offcanvas-submenu">
          <li><a href="../pc/index.html" data-page="pc">PCトップ</a></li>
          <li><a href="../pc/reserve.html" data-page="pc-calendar">カレンダー</a></li>
        </ul>
      </li>

      <hr>
      <li class="offcanvas-group" id="nav-admin" style="display: none;">
        <button class="offcanvas-toggle">
          🛠 管理者メニュー
          <span class="arrow"></span>
        </button>
        <ul class="offcanvas-submenu">
          <li>
            <a href="/reserve_site/admin/index.html" data-page="admin-users">
              ユーザー管理
            </a>
          </li>
          <li>
            <a href="/reserve_site/camera/admin.html" data-page="admin-camera">
              カメラ予約管理
            </a>
          </li>
          <li>
            <a href="/reserve_site/pc/admin.html" data-page="admin-pc">
              PC予約管理
            </a>
          </li>
        </ul>
      </li>
      <hr>
      
      <li id="nav-logout" style="display: none;">
        <a href="#" id="logoutBtnOffcanvas">ログアウト</a>
      </li>
    </ul>
  </div>

  <div class="offcanvas-backdrop"></div>

<!-- オフキャンバス（既存流用） -->
<div class="offcanvas-nav">…</div>
<div class="offcanvas-backdrop"></div>

<script src="../nav/js/nav-base.js"></script>
<script src="../nav/js/nav-auth-bridge.js"></script>
<script src="../calendar/js/calendar-admin.js"></script>

</body>
</html>